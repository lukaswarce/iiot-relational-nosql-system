<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparaci√≥n MySQL vs InfluxDB</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #16a085;
            padding-bottom: 10px;
        }
        .mermaid {
            text-align: center;
            margin: 30px 0;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .comparison-table th {
            background: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
        }
        .comparison-table td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        .comparison-table tr:nth-child(even) {
            background: #f9f9f9;
        }
        .mysql-col {
            background: #e8f5e9 !important;
        }
        .influx-col {
            background: #e3f2fd !important;
        }
        .use-case {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        .info {
            background: #d1ecf1;
            padding: 15px;
            border-left: 4px solid #16a085;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üÜö Comparaci√≥n: MySQL vs InfluxDB</h1>
        <div class="info">
            <strong>Polyglot Persistence en IIoT</strong><br>
            Cada base de datos tiene fortalezas espec√≠ficas. La clave es usar la herramienta correcta para cada trabajo.
        </div>
        
        <h2>Tabla Comparativa Completa</h2>
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Caracter√≠stica</th>
                    <th class="mysql-col">MySQL (Relacional)</th>
                    <th class="influx-col">InfluxDB (Time-Series)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Tipo de Base de Datos</strong></td>
                    <td class="mysql-col">RDBMS - Sistema Relacional</td>
                    <td class="influx-col">TSDB - Time Series Database</td>
                </tr>
                <tr>
                    <td><strong>Modelo de Datos</strong></td>
                    <td class="mysql-col">Tablas con filas y columnas</td>
                    <td class="influx-col">Measurements con tags/fields/timestamp</td>
                </tr>
                <tr>
                    <td><strong>Lenguaje de Consulta</strong></td>
                    <td class="mysql-col">SQL est√°ndar</td>
                    <td class="influx-col">Flux (moderno) / InfluxQL (legacy)</td>
                </tr>
                <tr>
                    <td><strong>Indexaci√≥n</strong></td>
                    <td class="mysql-col">Primary Key, Foreign Key, √≠ndices manuales</td>
                    <td class="influx-col">Tags indexados autom√°ticamente + timestamp</td>
                </tr>
                <tr>
                    <td><strong>Relaciones entre Datos</strong></td>
                    <td class="mysql-col">‚úÖ JOINs, Foreign Keys, integridad referencial</td>
                    <td class="influx-col">‚ùå No soporta relaciones/JOINs</td>
                </tr>
                <tr>
                    <td><strong>Transacciones ACID</strong></td>
                    <td class="mysql-col">‚úÖ ACID completo (Atomicity, Consistency, Isolation, Durability)</td>
                    <td class="influx-col">‚ùå No soporta transacciones tradicionales</td>
                </tr>
                <tr>
                    <td><strong>Performance Escritura</strong></td>
                    <td class="mysql-col">~10,000 escrituras/segundo</td>
                    <td class="influx-col">~1,000,000+ escrituras/segundo</td>
                </tr>
                <tr>
                    <td><strong>Consultas Temporales</strong></td>
                    <td class="mysql-col">Lentas sin √≠ndices espec√≠ficos</td>
                    <td class="influx-col">‚ö° Extremadamente r√°pidas (optimizado para tiempo)</td>
                </tr>
                <tr>
                    <td><strong>Agregaciones</strong></td>
                    <td class="mysql-col">GROUP BY, AVG(), SUM(), COUNT()</td>
                    <td class="influx-col">Window functions, aggregateWindow(), muy optimizadas</td>
                </tr>
                <tr>
                    <td><strong>Retenci√≥n de Datos</strong></td>
                    <td class="mysql-col">Manual (DELETE queries)</td>
                    <td class="influx-col">Pol√≠ticas autom√°ticas de retenci√≥n</td>
                </tr>
                <tr>
                    <td><strong>Compresi√≥n</strong></td>
                    <td class="mysql-col">Opcional, manual</td>
                    <td class="influx-col">Autom√°tica, muy eficiente para series temporales</td>
                </tr>
                <tr>
                    <td><strong>Downsampling</strong></td>
                    <td class="mysql-col">Manual (queries complejos)</td>
                    <td class="influx-col">Autom√°tico (Continuous Queries/Tasks)</td>
                </tr>
                <tr>
                    <td><strong>Tama√±o T√≠pico DB</strong></td>
                    <td class="mysql-col">Peque√±o a medio (GB a TB)</td>
                    <td class="influx-col">Muy grande (TB a PB) por alto volumen</td>
                </tr>
                <tr>
                    <td><strong>Caso de Uso Principal</strong></td>
                    <td class="mysql-col">Datos transaccionales, relaciones complejas</td>
                    <td class="influx-col">M√©tricas temporales, monitoreo, IoT</td>
                </tr>
            </tbody>
        </table>
        
        <h2>Comparaci√≥n Visual de Performance</h2>
        <div class="mermaid">
graph TB
    subgraph "üìä Query: Temperatura √öltima Hora"
        Q1[MySQL: Full table scan]
        Q2[InfluxDB: Temporal index]
        
        Q1 --> R1[‚è±Ô∏è ~500ms<br/>3600 registros]
        Q2 --> R2[‚ö° ~5ms<br/>√çndice temporal]
    end
    
    subgraph "üîó Query: JOIN 3 Tablas Producci√≥n"
        Q3[MySQL: Inner JOIN]
        Q4[InfluxDB: No soporta]
        
        Q3 --> R3[‚úÖ ~50ms<br/>Relaciones complejas]
        Q4 --> R4[‚ùå N/A<br/>No hay JOINs]
    end
    
    subgraph "üìà Query: Agregaci√≥n Temporal 24h"
        Q5[MySQL: GROUP BY hour]
        Q6[InfluxDB: aggregateWindow]
        
        Q5 --> R5[‚è±Ô∏è ~2000ms<br/>Sin optimizaci√≥n]
        Q6 --> R6[‚ö° ~15ms<br/>Nativo para tiempo]
    end
    
    style Q1 fill:#ffcccc
    style Q2 fill:#ccffcc
    style Q3 fill:#ccffcc
    style Q4 fill:#ffcccc
    style Q5 fill:#ffcccc
    style Q6 fill:#ccffcc
        </div>
        
        <h2>‚úÖ Cu√°ndo Usar MySQL</h2>
        <div class="use-case">
            <strong>Casos de Uso Ideales:</strong>
            <ul>
                <li>üè≠ <strong>Informaci√≥n de l√≠neas de producci√≥n</strong> - Datos maestros con relaciones</li>
                <li>üì¶ <strong>Lotes de producci√≥n</strong> - Trazabilidad completa con Foreign Keys</li>
                <li>üë• <strong>Datos de usuarios/operadores</strong> - Autenticaci√≥n y autorizaci√≥n</li>
                <li>üìã <strong>Inspecciones de calidad</strong> - Relacionadas con batches y l√≠neas</li>
                <li>‚ö†Ô∏è <strong>Sistema de alertas</strong> - Requiere seguimiento y acknowledgment</li>
                <li>üîß <strong>Configuraci√≥n de sensores</strong> - Metadatos relacionados con l√≠neas</li>
                <li>üíº <strong>Datos transaccionales</strong> - Necesitan ACID (pedidos, inventario)</li>
                <li>üìä <strong>Reportes complejos</strong> - M√∫ltiples JOINs y agregaciones</li>
            </ul>
        </div>
        
        <h2>‚úÖ Cu√°ndo Usar InfluxDB</h2>
        <div class="use-case">
            <strong>Casos de Uso Ideales:</strong>
            <ul>
                <li>üå°Ô∏è <strong>Lecturas continuas de temperatura</strong> - Miles de puntos/minuto</li>
                <li>üí® <strong>Mediciones de presi√≥n</strong> - Series temporales de alta frecuencia</li>
                <li>üì≥ <strong>Datos de vibraci√≥n</strong> - Monitoreo predictivo de equipos</li>
                <li>‚ö° <strong>Cualquier sensor IIoT</strong> - Datos con timestamp frecuente</li>
                <li>üìà <strong>An√°lisis de tendencias</strong> - Comportamiento a lo largo del tiempo</li>
                <li>üîî <strong>Detecci√≥n de anomal√≠as</strong> - An√°lisis de patrones temporales</li>
                <li>üìâ <strong>Downsampling autom√°tico</strong> - Reducir resoluci√≥n de datos antiguos</li>
                <li>üéØ <strong>KPIs en tiempo real</strong> - Dashboards de monitoreo activo</li>
            </ul>
        </div>
        
        <h2>üîÑ Estrategia Polyglot en Nuestro Sistema</h2>
        <div class="mermaid">
graph LR
    subgraph "Datos de Sensores"
        S1[Lectura Sensor]
    end
    
    subgraph "Decisi√≥n de Almacenamiento"
        D{Tipo de Dato?}
    end
    
    subgraph "MySQL"
        M1[Metadata del Sensor]
        M2[Alertas Generadas]
        M3[Configuraci√≥n]
    end
    
    subgraph "InfluxDB"
        I1[Serie Temporal<br/>Valor + Timestamp]
        I2[Agregaciones<br/>Por Ventana]
    end
    
    S1 --> D
    D -->|Metadato/Config| M1
    D -->|Alerta Cr√≠tica| M2
    D -->|Valor Medido| I1
    I1 -->|Downsampling| I2
    I2 -->|Umbral Excedido| M2
    M1 -->|Referencia| I1
    
    style M1 fill:#e8f5e9
    style M2 fill:#e8f5e9
    style M3 fill:#e8f5e9
    style I1 fill:#e3f2fd
    style I2 fill:#e3f2fd
        </div>
        
        <div class="info">
            <strong>üéØ Principio Clave:</strong><br>
            No existe una "base de datos perfecta". La arquitectura moderna de IIoT combina m√∫ltiples sistemas,
            cada uno optimizado para su tipo espec√≠fico de dato. MySQL maneja las relaciones y transacciones,
            mientras InfluxDB maneja el alto volumen de datos temporales.
        </div>
        
        <h2>üìö Ejemplos de Consultas Equivalentes</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
            <div style="background: #e8f5e9; padding: 15px; border-radius: 5px;">
                <h3>MySQL - Temperatura Promedio</h3>
                <pre style="background: #2c3e50; color: #ecf0f1; padding: 10px; border-radius: 5px; overflow-x: auto;">
SELECT 
  AVG(value) as avg_temp,
  location
FROM sensor_readings
WHERE sensor_type = 'temperature'
  AND timestamp > DATE_SUB(NOW(), INTERVAL 1 HOUR)
GROUP BY location;</pre>
            </div>
            
            <div style="background: #e3f2fd; padding: 15px; border-radius: 5px;">
                <h3>InfluxDB Flux - Temperatura Promedio</h3>
                <pre style="background: #2c3e50; color: #ecf0f1; padding: 10px; border-radius: 5px; overflow-x: auto;">
from(bucket: "iiot_sensors")
  |> range(start: -1h)
  |> filter(fn: (r) => 
      r._measurement == "temperature")
  |> aggregateWindow(
      every: 1h, 
      fn: mean)
  |> group(columns: ["location"])</pre>
            </div>
        </div>
    </div>
    
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>
